#parse("/common/const.vm")
#parse("/common/controller.vm")

#parse("/common/doctype.vm")

<html xmlns="http://www.w3.org/1999/xhtml">

<head>
	#parse("/common/meta.vm")
	<title>$titlePrefix$msg.get_password.title</title>
	#parse("/common/css.vm")
	<link rel="stylesheet" href="$cssRoot/validationEngine.jquery.css" type="text/css"/>
	<link rel="stylesheet" href="$cssRoot/template.css" type="text/css"/>
	<script type="text/javascript" src="$jsRoot/jquery-1.6.min.js"></script>
	<script type="text/javascript" src="$jsRoot/languages/jquery.validationEngine-zh_CN.js" charset="utf-8"></script>
	<script type="text/javascript" src="$jsRoot/jquery.validationEngine.js" charset="utf-8"></script>
	<script >
		jQuery(document).ready(function(){
			jQuery("#get_password").validationEngine();
		});
		
		function beforeCall(form, options){
			if (console) 
			console.log("Right before the AJAX form validation call");
			return true;
		}
            
		// Called once the server replies to the ajax form validation request
		function ajaxValidationCallback(status, form, json, options){
			if (console) 
			console.log(status);
                
			if (status === true) {
				alert("the form is valid!");
				// uncomment these lines to submit the form to form.action
				// form.validationEngine('detach');
				// form.submit();
				// or you may use AJAX again to submit the data
			}
		}
            
		jQuery(document).ready(function(){
			jQuery("#get_password").validationEngine({
				ajaxFormValidation: true,
				onAjaxFormComplete: ajaxValidationCallback,
				onBeforeAjaxFormValidation: beforeCall
			});
		});
	</script>
</head>

<body>
	<form id="get_password" class="formular" method="post" action="$!securityController.get_password">
		<fieldset>
			<legend>
				$msg.get_password.title
			</legend>
			<label>
				<span>$msg.get_password.username$msg.common.colon</span>
				<input class="validate[required,minSize[6],ajax[ajaxTest]] text-input" maxlength="20" type="text" name="username" id="username" />
			</label>
			<label>
				<span>$msg.get_password.security_code$msg.common.colon</span>
				<input class="validate[required,minSize[4]] text-input" maxlength="4" type="text" name="securityCode" id="securityCode" />
			</label>
			<label>
				<img src="$!securityController.get_security_code" width="250px" height="50px" />
			</label>
		</fieldset>
		<input class="submit" type="submit" value="$msg.get_password.submit"/><hr/>
	</form>
</body>	

	
</html>